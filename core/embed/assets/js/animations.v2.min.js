const btns=document.querySelectorAll("div.line_info button"),svg=document.getElementById("metromap_map"),line_info=document.querySelector("div.line_info");btns.forEach(btn=>{btn.addEventListener("click",ev=>{if(button=ev.target,null==button.dataset.line&&(button=ev.target.parentNode),line=button.dataset.line,btn.classList.contains("active")){const activebtns=document.querySelectorAll("div.line_info button.active");if(activebtns.length<=1){svg.classList.remove("focus"),line_info.classList.remove("focus");const unions=document.querySelectorAll(`svg#metromap_map g.unions g.linea${line}`);unions.forEach(union=>{union.classList.remove("focus")})}else{const actives=[];activebtns.forEach(temp=>{actives.push("linea"+temp.dataset.line)});const unions=document.querySelectorAll(`svg#metromap_map g.unions g.linea${line}`);unions.forEach(union=>{let classArray=Array.from(union.classList),commonClasses;actives.filter(cls=>classArray.includes(cls)).length<=1&&union.classList.remove("focus")})}document.querySelector(`svg#metromap_map g.linea${line}segments`).classList.remove("focus"),document.querySelector(`svg#metromap_map g.linea${line}stations`).classList.remove("focus"),btn.classList.remove("active")}else{svg.classList.add("focus"),line_info.classList.add("focus"),document.querySelector(`svg#metromap_map g.linea${line}segments`).classList.add("focus"),document.querySelector(`svg#metromap_map g.linea${line}stations`).classList.add("focus");const unions=document.querySelectorAll(`svg#metromap_map g.unions g.linea${line}`);unions.forEach(union=>{union.classList.add("focus")}),btn.classList.add("active")}})});const pz=panzoom(svg,{minZoom:1,maxZoom:5,bounds:!0,boundsPadding:1,autocenter:!0,zoomDoubleClickSpeed:1});pz.on("zoom",(function(e){e.getTransform().scale>1?(svg.classList.add("zoomed"),document.querySelector(".line_info").classList.add("zoomed"),document.querySelector("#bmc").classList.add("zoomed")):(svg.classList.remove("zoomed"),document.querySelector(".line_info").classList.remove("zoomed"),document.querySelector("#bmc").classList.remove("zoomed"))}));